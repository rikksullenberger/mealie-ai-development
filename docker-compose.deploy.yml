services:
  mealie-ai:
    container_name: mealie-ai
    image: rikksullenber/mealie-ai:latest
    restart: always
    volumes:
      - mealie-ai-data:/app/data/
    ports:
      - "9099:9000"
    environment:
      # Basic Configuration
      ALLOW_SIGNUP: "false"
      LOG_LEVEL: "INFO"

      # Database Engine
      DB_ENGINE: sqlite # Options: 'sqlite', 'postgres'

      # =====================================
      # OpenAI Configuration (for AI Features)
      # =====================================
      OPENAI_ENABLED: "true"
      # IMPORTANT: Replace with your actual OpenAI API key
      OPENAI_API_KEY: "your-openai-api-key-here"
      OPENAI_MODEL: "gpt-3.5-turbo" # Options: "gpt-4", "gpt-3.5-turbo", "gpt-4o", etc.
      # OPENAI_BASE_URL: "https://api.openai.com/v1"  # Optional: custom endpoint
      # OPENAI_WORKERS: "1"  # Optional: concurrent workers
      # OPENAI_SEND_DATABASE_DATA: "true"  # Optional: send DB context
      # OPENAI_ENABLE_IMAGE_SERVICES: "true"  # Optional: enable image features

      # =====================================
      # Postgres Config (if using postgres)
      # =====================================
      # POSTGRES_USER: mealie
      # POSTGRES_PASSWORD: mealie
      # POSTGRES_SERVER: postgres
      # POSTGRES_PORT: 5432
      # POSTGRES_DB: mealie

      # =====================================
      # Email Configuration (Optional)
      # =====================================
      # SMTP_HOST:
      # SMTP_PORT: 587
      # SMTP_FROM_NAME: Mealie
      # SMTP_AUTH_STRATEGY: TLS  # Options: 'TLS', 'SSL', 'NONE'
      # SMTP_FROM_EMAIL:
      # SMTP_USER:
      # SMTP_PASSWORD:

volumes:
  mealie-ai-data:
    driver: local
